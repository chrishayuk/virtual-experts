{
  "name": "entity_consume_multiply",
  "expert": "entity_track",
  "description": "Consume items then sell remainder",
  "pattern": "entity_track",
  "variant": "consume_then_multiply",
  "vocab": {
    "person": {"type": "person_with_pronouns"},
    "item": {"path": "items.countable_singular"}
  },
  "template_vars": {
    "name": "person.name",
    "subject": "person.subject",
    "subj": "person.subject|capitalize",
    "his_her": "person.possessive",
    "items": "item|pluralize",
    "initial": "start",
    "eat_verb1": "uses",
    "eat_verb2": "gives away"
  },
  "variables": {
    "start": {
      "type": "int",
      "min": 15,
      "max": 35
    },
    "consume1": {
      "type": "int",
      "min": 2,
      "max": 6
    },
    "consume2": {
      "type": "int",
      "min": 2,
      "max": 6
    },
    "price": {
      "type": "int",
      "min": 2,
      "max": 8
    }
  },
  "constraints": {
    "start - consume1 - consume2": {
      "min": 5
    }
  },
  "trace": [
    {
      "op": "init",
      "var": "items",
      "value": "start"
    },
    {
      "op": "consume",
      "entity": "items",
      "amount": "consume1"
    },
    {
      "op": "consume",
      "entity": "items",
      "amount": "consume2"
    },
    {
      "op": "init",
      "var": "price",
      "value": "price"
    },
    {
      "op": "compute",
      "compute_op": "mul",
      "args": [
        "items",
        "price"
      ],
      "var": "revenue"
    },
    {
      "op": "query",
      "var": "revenue"
    }
  ],
  "answer": "(start - consume1 - consume2) * price"
}
