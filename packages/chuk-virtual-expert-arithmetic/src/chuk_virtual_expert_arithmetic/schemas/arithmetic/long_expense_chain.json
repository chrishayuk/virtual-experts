{
  "name": "long_expense_chain",
  "description": "Start - expenses, then multiply remainder",
  "variables": {
    "start": {
      "type": "int",
      "min": 100,
      "max": 300
    },
    "exp1": {
      "type": "int",
      "min": 10,
      "max": 40
    },
    "exp2": {
      "type": "int",
      "min": 10,
      "max": 40
    },
    "exp3": {
      "type": "int",
      "min": 10,
      "max": 30
    },
    "multiplier": {
      "type": "int",
      "min": 2,
      "max": 4
    }
  },
  "constraints": {
    "start - exp1 - exp2 - exp3": {
      "min": 20
    }
  },
  "trace": [
    {
      "op": "init",
      "var": "start",
      "value": "start"
    },
    {
      "op": "init",
      "var": "exp1",
      "value": "exp1"
    },
    {
      "op": "init",
      "var": "exp2",
      "value": "exp2"
    },
    {
      "op": "init",
      "var": "exp3",
      "value": "exp3"
    },
    {
      "op": "init",
      "var": "multiplier",
      "value": "multiplier"
    },
    {
      "op": "compute",
      "compute_op": "sub",
      "args": [
        "start",
        "exp1"
      ],
      "var": "step1"
    },
    {
      "op": "compute",
      "compute_op": "sub",
      "args": [
        "step1",
        "exp2"
      ],
      "var": "step2"
    },
    {
      "op": "compute",
      "compute_op": "sub",
      "args": [
        "step2",
        "exp3"
      ],
      "var": "step3"
    },
    {
      "op": "compute",
      "compute_op": "mul",
      "args": [
        "step3",
        "multiplier"
      ],
      "var": "result"
    },
    {
      "op": "query",
      "var": "result"
    }
  ],
  "answer": "(start - exp1 - exp2 - exp3) * multiplier",
  "pattern": "long_expense_chain",
  "vocab": {
    "person": {
      "type": "person_with_pronouns"
    },
    "cat1": {
      "path": "phrases.expense_categories"
    },
    "cat2": {
      "path": "phrases.expense_categories",
      "distinct_from": ["cat1"]
    },
    "cat3": {
      "path": "phrases.expense_categories",
      "distinct_from": ["cat1", "cat2"]
    }
  },
  "template_vars": {
    "name": "person.name",
    "subject": "person.subject",
    "subj": "person.subject|capitalize"
  }
}
